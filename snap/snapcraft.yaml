name: go-webserver
summary: Lightweight webserver to display a basic html file
description: |
      Created to display a basic loading html file until the PLC has started.
version: test
base: core22
architectures:
  - build-on: amd64
  - run-on: all
confinement: strict
grade: stable
type: app

apps:
  go-webserver:
    command: bin/main.exe
    plugs:
      - home
      - browser-support
      - network
      - network-bind
    daemon: simple
    restart-condition: always

parts:
  go-webserver:
    plugin: go
    build-snaps: [go/latest/stable]
    source: https://github.com/jgrantmoore/go-webserver
    source-type: git
    override-build: |
      env GOOS=linux GOARCH=arm go build -o ./bin/ main.go